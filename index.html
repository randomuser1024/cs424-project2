<!DOCTYPE html>
<html>

<head>
    <meta charset=utf-8 />
    <title>Leaflet Fullscreen</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://api.mapbox.com/mapbox.js/v2.2.2/mapbox.js'></script>
    <link href='https://api.mapbox.com/mapbox.js/v2.2.2/mapbox.css' rel='stylesheet' />
    <style>
        body {
            margin: 0;
            padding: 0;
        }
        
        #map {
            position: absolute;
            top: 0;
            bottom: 0;
            width: 100%;
        }
    </style>

    <script src="lib/d3/d3.min.js"></script>
    <script src="src/loadHurdat.js"></script>
</head>

<body>
    <script src='https://api.mapbox.com/mapbox.js/plugins/leaflet-fullscreen/v0.0.4/Leaflet.fullscreen.min.js'></script>
    <link href='https://api.mapbox.com/mapbox.js/plugins/leaflet-fullscreen/v0.0.4/leaflet.fullscreen.css' rel='stylesheet' />

    <div id='map'></div>

    <script>
        var mapboxAccessToken = "pk.eyJ1IjoiZmFmYXJvIiwiYSI6ImNpZnJxaXZ5dDBveXVzbG0wbm5kNjByNXQifQ.1ziviq2_srmlbk7VkiVegA";
        var mapid = 'fafaro.nn73cpe2';
        L.mapbox.accessToken = mapboxAccessToken;
        var map = L.mapbox.map('map', mapid)
            .setView([39.50, -98.35], 3);
        //.fitBounds(maxBounds);

        L.control.fullscreen().addTo(map);

        loadHurdat("./data/hurdat2-atlantic.csv", function (d) {
            function addTrack(track, map) {
                var pointList = [];

                track.forEach(function (tp) {
                    var coords = tp.coordinates;
                    pointList.push(new L.LatLng(coords[0], coords[1]));
                });

                new L.Polyline(pointList, {
                    color: 'red',
                    weight: 3,
                    opacity: 0.5,
                    smoothFactor: 1
                }).addTo(map);
            }

            for (var i = 0; i < 100; i++)
                addTrack(d[i].track, map);

        });
    </script>
</body>

</html>